---
title: "Практическая работа 002"
author: "dolgov18012005@yandex.ru"
format: 
  md:
    output-file: README.md
---

## Цель работы

1. Развить практические навыки использования языка программирования R для обработки данных
2. Закрепить знания базовых типов данных языка R
3. Развить практические навыки использования функций обработки данных пакета `dplyr` – функции `select(), filter(), mutate(), arrange(), group_by()`

## Исходные данные

1. Программное обеспечение Manjaro
2. Rstudio Desktop
3. Интерпретатор языка R 4.5.1

## Задание

Используя программный пакет dplyr, освоить базовые
операции в языке программирования R.

## Ход работы

1. Проанализировать встроенный в пакет dplyr набор данных starwars с помощью языка R и ответить на вопросы:
    - Сколько строк в датафрейме?
    - Сколько столбцов в датафрейме?
    - Как просмотреть примерный вид датафрейма?
    - Сколько уникальных рас персонажей (species) представлено в данных?
    - Найти самого высокого персонажа.
    - Найти всех персонажей ниже 170
    - Подсчитать ИМТ (индекс массы тела) для всех персонажей.
    - Найти 10 самых “вытянутых” персонажей. “Вытянутость” оценить по отношению массы (mass) к росту (height) персонажей
    - Найти средний возраст персонажей каждой расы вселенной Звездных войн
    - Найти самый распространенный цвет глаз персонажей вселенной Звездных войн.
    - Подсчитать среднюю длину имени в каждой расе вселенной Звездных войн.
2. Оформить отчет в соответствии с шаблоном

### Шаг 1

Подключаем библиотеку dplyr

```{r}
library(dplyr)
```
    
#### Сколько строк в датафрейме?

```{r}
starwars %>% nrow()
```

#### Сколько столбцов в датафрейме?


```{r}
starwars %>% ncol()
```

#### Как просмотреть примерный вид датафрейма?

```{r}
starwars %>% glimpse()
```

#### Сколько уникальных рас персонажей (species) представлено в данных?

```{r}
starwars %>% select(., species) %>% filter(!is.na(species)) %>% unique(.) %>% count(.) |> knitr::kable(format = "markdown")
```

#### Найти самого высокого персонажа.

```{r}
starwars %>% arrange(., desc(height)) %>% select(name) %>% slice(1)  |> knitr::kable(format = "markdown")
```

#### Найти всех персонажей ниже 170
 
```{r}
starwars %>% filter(height < 170) %>% select(., name, height)|> knitr::kable(format = "markdown")
```

#### Подсчитать ИМТ (индекс массы тела) для всех персонажей.

```{r}
starwars %>% mutate(., imt = mass / (height^2)) %>% select(., name, imt) |> knitr::kable(format = "markdown")
```


#### Найти 10 самых “вытянутых” персонажей. “Вытянутость” оценить по отношению массы (mass) к росту (height) персонажей
 
```{r}
starwars %>% mutate(., vut = mass / height) %>% select(., name, vut) %>% arrange(., vut) %>% slice(., 1:10) |> knitr::kable(format = "markdown")
```


#### Найти средний возраст персонажей каждой расы вселенной Звездных войн

```{r}
starwars %>% filter(!is.na(birth_year)) %>% filter(!is.na(species)) %>% group_by(., species) %>% summarize(mean_age = mean(100 - birth_year)) %>% select(., species, mean_age) |> knitr::kable(format = "markdown")
```

#### Найти самый распространенный цвет глаз персонажей вселенной Звездных войн.

```{r}
starwars %>% group_by(., eye_color) %>% summarize(count_colors = n()) %>% arrange(., desc(count_colors)) %>% select(., eye_color) %>% slice(1)
```

#### Подсчитать среднюю длину имени в каждой расе вселенной Звездных войн.

```{r}
starwars %>% filter(!is.na(species)) %>% group_by(., species) %>% summarize(mean_len = mean(nchar(name))) %>% select(., species, mean_len) |> knitr::kable(format = "markdown")
```

### Шаг 2

Отчёт написан и оформлен

